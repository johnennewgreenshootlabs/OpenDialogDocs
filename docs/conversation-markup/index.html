<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Conversation Markup Basics · OpenDialog</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;conversation-markup-basics&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#conversation-markup-basics&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conversation Markup Basics&lt;/h2&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Conversation Markup Basics · OpenDialog"/><meta property="og:type" content="website"/><meta property="og:url" content="https://opendialogai.github.io/OpenDialogDocs/"/><meta property="og:description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;conversation-markup-basics&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#conversation-markup-basics&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conversation Markup Basics&lt;/h2&gt;
"/><meta property="og:image" content="https://opendialogai.github.io/OpenDialogDocs/img/greenshoot.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://opendialogai.github.io/OpenDialogDocs/img/greenshoot.png"/><link rel="shortcut icon" href="/OpenDialogDocs/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://opendialogai.github.io/OpenDialogDocs/blog/atom.xml" title="OpenDialog Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://opendialogai.github.io/OpenDialogDocs/blog/feed.xml" title="OpenDialog Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/OpenDialogDocs/css/main.css"/><script src="/OpenDialogDocs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/OpenDialogDocs/"><h2 class="headerTitle">OpenDialog</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/OpenDialogDocs/docs/conversational-applications" target="_self">Docs</a></li><li class=""><a href="/OpenDialogDocs/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Defining Conversations</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Core Ideas</h3><ul class=""><li class="navListItem"><a class="navItem" href="/OpenDialogDocs/docs/conversational-applications">Conversational Applications</a></li><li class="navListItem"><a class="navItem" href="/OpenDialogDocs/docs/conversational-model">Concepts</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Defining Conversations</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/OpenDialogDocs/docs/conversation-markup">Conversation Markup Basics</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Conversation Markup Basics</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="conversation-markup-basics"></a><a href="#conversation-markup-basics" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conversation Markup Basics</h2>
<p>Conversations can be defined using a YAML file. This makes them easy to version and share and easy to understand.</p>
<p>Each YAML file holds a single conversation. Each conversation has an identifier which needs to be unique within a group of conversations that an agent should be dealing with.</p>
<h3><a class="anchor" aria-hidden="true" id="conversation-id"></a><a href="#conversation-id" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conversation ID</h3>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">conversation:</span>
<span class="hljs-attr">  id:</span> <span class="hljs-string">remaining_tasks_conversation</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="conditions"></a><a href="#conditions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conditions</h3>
<p>A conversation can have conditions associated with it. Conditions are a list of statements that need to evaluate to true for the conversation to be considered. For example:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">conditions:</span>
<span class="hljs-attr">  - last_message_posted_time:</span> <span class="hljs-number">10000</span>
<span class="hljs-attr">    operation:</span> <span class="hljs-string">ge</span>
</code></pre>
<p>The above condition statement will ask the conversation engine to verify that the value of the attribute <code>last_message_posted_time</code> is <code>greater than or equal</code> to 10000.</p>
<p>The allowed operations are</p>
<pre><code class="hljs">le - <span class="hljs-keyword">less than or equal</span> <span class="hljs-keyword">to</span>
lt - <span class="hljs-keyword">less than</span>
ge - <span class="hljs-keyword">greater than</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">equal</span> <span class="hljs-keyword">to</span>
gt - <span class="hljs-keyword">greater than</span>
</code></pre>
<p>If the conditional check is for a boolean no operation is required.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">conditions:</span>
<span class="hljs-attr">  - user_is_logged_in:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>All the conditions associated with a conversation must evaluate to true for the conversation to be considered.</p>
<h3><a class="anchor" aria-hidden="true" id="scenes"></a><a href="#scenes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scenes</h3>
<p>A scene represents an exchange of intents between participants in a scene.</p>
<p>Scenes can have conditions defined that need to evaluate to true (just like conversations).</p>
<p>Each scene has an identifier which is also the key of the scene object in YAML. Exchanges of intents are defined by the identifier for the participant expressing that intent and an identifier for the intent.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">scenes:</span>
<span class="hljs-attr">  opening_scene:</span>
<span class="hljs-attr">    intents:</span>
<span class="hljs-attr">     - u:</span> <span class="hljs-string">remaining_tasks</span>
<span class="hljs-attr">     - b:</span> <span class="hljs-string">task_report</span>
</code></pre>
<p>The <code>welcome_scene</code> above captures the exchange between the user (<code>u</code>) and the bot (<code>b</code>). The user starts the conversation with the opening intent <code>remaining_tasks</code>. Th <code>u</code> and <code>b</code> are default identifiers.</p>
<p>In real terms this means that the user asked something like <code>tell me what other tasks I have to do</code> or <code>give me my remaining tasks</code> or <code>fetch unfinished work</code>. All these <em>utterances</em> can be mapped to a <em>single</em> intent.</p>
<p>The bot replies with a message that has the intent of presenting the user a task report.</p>
<h4><a class="anchor" aria-hidden="true" id="interpreters"></a><a href="#interpreters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interpreters</h4>
<p>In order to interpret utterances from users to specific intents we use interpreters. OpenDialog supports both an application-wide default interpreter that can be used for all utterances, but conversations, scenes and intents within scenes can define their own interpreters.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">scenes:</span>
<span class="hljs-attr">  opening_scene:</span>
<span class="hljs-attr">    intents:</span>
<span class="hljs-attr">     - u:</span> <span class="hljs-string">remaining_tasks</span>
<span class="hljs-attr">       interpreter:</span> <span class="hljs-string">remaining_tasks_interpreter</span>
<span class="hljs-attr">     - b:</span> <span class="hljs-string">task_report</span>
</code></pre>
<p>When the conversation engine is attempting to match an utterance to an intent and considers the <code>welcome_scene</code> of the <code>task_management</code> conversation it will ask that the utterance be given to the <code>remaining_tasks_interpreter</code> for interpretation.</p>
<h4><a class="anchor" aria-hidden="true" id="actions"></a><a href="#actions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actions</h4>
<p>After a user intent is matched or a bot intent is selected to generate a response utterance we can define an action to be performed. In the background, the results of that action will be available for the agent to use to render the response or do any other type of reasoning required.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">scenes:</span>
<span class="hljs-attr">  opening_scene:</span>
<span class="hljs-attr">    intents:</span>
<span class="hljs-attr">     - u:</span> 
<span class="hljs-attr">         i:</span> <span class="hljs-string">remaining_tasks</span>
<span class="hljs-attr">         interpreter:</span> <span class="hljs-string">remaining_tasks_interpreter</span>
<span class="hljs-attr">         action:</span> <span class="hljs-string">retrieve_remaining_tasks</span>
<span class="hljs-attr">     - b:</span> <span class="hljs-string">task_report</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="completing-conversations"></a><a href="#completing-conversations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Completing conversations</h4>
<p>A conversation is considered complete when the last utterance of the last scene is reached or an explicit <code>completes:true</code> statement is reached.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">scenes:</span>
<span class="hljs-attr">  opening_scene:</span>
<span class="hljs-attr">    intents:</span>
<span class="hljs-attr">     - u:</span> 
<span class="hljs-attr">        i:</span> <span class="hljs-string">remaining_tasks</span>
<span class="hljs-attr">        interpeter:</span> <span class="hljs-string">remaining_tasks_interpreter</span>
<span class="hljs-attr">        action:</span> <span class="hljs-string">retrieve_remaining_tasks</span>
<span class="hljs-attr">     - b:</span> 
<span class="hljs-attr">        i:</span> <span class="hljs-string">task_report</span>
<span class="hljs-attr">        completes:</span> <span class="hljs-literal">true</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="multiple-scenes"></a><a href="#multiple-scenes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple scenes</h3>
<p>As conversations move between different states they can change scenes. For example, consider how we would represent the following possible exchange:</p>
<p><em>-User:</em> Create a new project</p>
<p><em>-Bot:</em> Would you like to start from a template or from scratch?</p>
<p><em>-User:</em> From scratch</p>
<p><em>-Bot:</em> What is the project called?</p>
<p><em>-User:</em> OpenDialog</p>
<p>an alternative exchange would be:</p>
<p><em>-User:</em> Create a new project</p>
<p><em>-Bot:</em> Would you like to start from a template or from scratch?</p>
<p><em>-User:</em> From a template</p>
<p><em>-Bot:</em> What template would you like to use?</p>
<p><em>-User:</em> Conversational project template</p>
<p><em>-Bot:</em> What is the project called?</p>
<p><em>-User:</em> OpenDialog</p>
<p>In the above exchanges the goal is the same, the use wants to create a new project. In the first instance, however, the user is starting from scratch while in the second they are starting from a template. Our task is to represent the full range of exchanges in a single conversation.</p>
<p>There are three key scenes. The opening scene, where the user asks to create a project and the bot asks what type of project and then two potential follow-on scenes, one leading to choosing a template to start the project from and the other creating a &quot;blank&quot; project.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">conversation:</span>
<span class="hljs-attr">  id:</span> <span class="hljs-string">create_a_new_project</span>
<span class="hljs-attr">  scenes:</span>
<span class="hljs-attr">    opening_scene:</span>
<span class="hljs-attr">      intents:</span>
<span class="hljs-attr">        - u:</span> 
<span class="hljs-attr">            i:</span> <span class="hljs-string">create_new_project</span>
<span class="hljs-attr">            interpreter:</span> <span class="hljs-string">create_new_project_interpreter</span>
<span class="hljs-attr">        - b:</span> <span class="hljs-string">type_of_project</span>
<span class="hljs-attr">        - u:</span> 
<span class="hljs-attr">            i:</span> <span class="hljs-string">project_from_template</span>
<span class="hljs-attr">            scene:</span> <span class="hljs-string">project_from_template</span>
<span class="hljs-attr">        - u:</span> 
<span class="hljs-attr">            i:</span> <span class="hljs-string">new_project</span>
<span class="hljs-attr">            scene:</span> <span class="hljs-string">new_project</span>
<span class="hljs-attr">    project_from_template:</span>
<span class="hljs-attr">      intents:</span>
<span class="hljs-attr">        - b:</span> <span class="hljs-string">select_a_template</span>
<span class="hljs-attr">        - u:</span> <span class="hljs-string">template_type</span>
<span class="hljs-attr">        - b:</span>
<span class="hljs-attr">            i:</span> <span class="hljs-string">confirm_template</span>
<span class="hljs-attr">            transition:</span>
<span class="hljs-attr">              scene:</span> <span class="hljs-string">new_project</span>
<span class="hljs-attr">    new_project:</span>
<span class="hljs-attr">      intents:</span>
<span class="hljs-attr">        - b:</span> <span class="hljs-string">request_project_name</span>
<span class="hljs-attr">        - u:</span> 
<span class="hljs-attr">            i:</span> <span class="hljs-string">project_name</span>
<span class="hljs-attr">            no_match:</span> 
<span class="hljs-attr">              b:</span> <span class="hljs-string">clarify_project_name_request</span>
<span class="hljs-attr">              attempts:</span> <span class="hljs-number">2</span> 
<span class="hljs-attr">              transition:</span> <span class="hljs-string">handle_failure</span>     
<span class="hljs-attr">        - b:</span> 
<span class="hljs-attr">            i:</span> <span class="hljs-string">confirm_project_name</span>
<span class="hljs-attr">            completes:</span> <span class="hljs-literal">true</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="opening-scene"></a><a href="#opening-scene" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Opening Scene</h4>
<p>The <code>opening_scene</code> would match if the <code>create_new_project_interpreter</code> matched the utterance to the intent <code>create_new_project</code>.</p>
<p>The bot would then respond with a message that carries the intent <code>type_of_project</code>.</p>
<p>If the user replies with <code>project_from_template</code> this would move the conversation to the <code>project_from_template</code> scene, while if the user replied with an utterance that matches <code>new_project</code> we would move the conversation to the <code>new_project</code> scene.</p>
<h4><a class="anchor" aria-hidden="true" id="project-from-template-scene"></a><a href="#project-from-template-scene" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Project from template scene</h4>
<p>In the <code>project_from_template</code> scene the bot askes the user to select a template type, the user replies with their selection and then the bot confirms the select. The conversation is the transited to the <code>new_project</code> scene.</p>
<h4><a class="anchor" aria-hidden="true" id="new-project-scene"></a><a href="#new-project-scene" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New Project scene</h4>
<p>In this scene the bot requests the project name, the user provides it and confirms. If the user replies in a way that cannot be matched to a <code>project_name</code> intent (e.g. they use characters in the project name that are not valid or use a name that is already taken) the bot will attempt twice to clarify the issue before transitioning the conversation to a <code>handle_failure</code> scene (not represented here).</p>
<h3><a class="anchor" aria-hidden="true" id="conditional-branching-based-on-missing-information"></a><a href="#conditional-branching-based-on-missing-information" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conditional branching based on missing information</h3>
<p>Another need for multiple scenes is so that we can collect information that is required to fulfull a request.</p>
<p><em>-User:</em> Create and assign a new task to me</p>
<p><em>-Bot:</em> What project should the task be under?</p>
<p><em>-User:</em> OpenDialog project</p>
<p><em>-Bot:</em> What's the task?</p>
<p><em>-User:</em> Update the OpenDialog documentation</p>
<p>From a human perspective this is a really simple conversation. From a conversation design perspective, however it can get quite complicated. Simple consider these some potential requests from the user:</p>
<p><em>-User:</em> Create and assign a new task</p>
<p><em>-User:</em> Create and assign a new task to me</p>
<p><em>-User:</em> Create and assign a new task called &quot;Update documentation&quot; to me</p>
<p><em>-User:</em> Create and assign a new task called &quot;Update documentation&quot; to me under the &quot;Open Dialog&quot; project</p>
<p>How do we capture all the possibilities in a way that would allow for variation to the conversation, for different pieces of information to be made available at different points in time or in a different sequence, etc.</p>
<p>Here is how you could represent this using OpenDialog's markup language.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">conversation:</span>
<span class="hljs-attr">  id:</span> <span class="hljs-string">create_a_new_task</span>
<span class="hljs-attr">  scenes:</span>
<span class="hljs-attr">    opening_scene:</span>
<span class="hljs-attr">      intents:</span>
<span class="hljs-attr">        - u:</span> <span class="hljs-string">create_a_new_task</span>
<span class="hljs-attr">          attributes:</span>
<span class="hljs-attr">            - id:</span> <span class="hljs-string">task.name</span>
<span class="hljs-attr">              if-not-present:</span>
<span class="hljs-attr">                transition:</span>
<span class="hljs-attr">                  scene:</span> <span class="hljs-string">request_task_name</span>
<span class="hljs-attr">            - id:</span> <span class="hljs-string">project.name</span>
<span class="hljs-attr">              if-not-present:</span>
<span class="hljs-attr">                transition:</span>
<span class="hljs-attr">                  scene:</span> <span class="hljs-string">request_project_name</span>
<span class="hljs-attr">            - id:</span> <span class="hljs-string">asignee.name</span>
<span class="hljs-attr">              if-not-present:</span>
<span class="hljs-attr">                transition:</span>
<span class="hljs-attr">                  scene:</span> <span class="hljs-string">request_assignee_name</span>
<span class="hljs-attr">          actions:</span>
<span class="hljs-attr">            action:</span> <span class="hljs-string">create_task</span>
<span class="hljs-attr">        - b:</span> <span class="hljs-string">task_creation_report</span>
<span class="hljs-attr">          completes:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">    request_task_name:</span>
<span class="hljs-attr">      intents:</span>
<span class="hljs-attr">      - b:</span> <span class="hljs-string">request_task_name</span>
<span class="hljs-attr">      - u:</span> <span class="hljs-string">task_name</span>
<span class="hljs-attr">        no_match:</span> <span class="hljs-string">clarify_task_name_request</span>
<span class="hljs-attr">        attempts:</span> <span class="hljs-number">2</span>      
<span class="hljs-attr">      - b:</span> <span class="hljs-string">confirm_task_name</span>
<span class="hljs-attr">      - u_virtual:</span> <span class="hljs-string">create_a_new_task</span>
<span class="hljs-attr">        scene:</span> <span class="hljs-string">opening_scene</span>  
<span class="hljs-attr">    request_project_name:</span>
<span class="hljs-attr">      intents:</span>
<span class="hljs-attr">      - b:</span> <span class="hljs-string">request_project_name</span>
<span class="hljs-attr">      - u:</span> <span class="hljs-string">project_name</span>
<span class="hljs-attr">        no_match:</span> <span class="hljs-string">clarify_project_name_request</span>
<span class="hljs-attr">        attempts:</span> <span class="hljs-number">2</span>      
<span class="hljs-attr">      - b:</span> <span class="hljs-string">confirm_project_name</span>
<span class="hljs-attr">      - u_virtual:</span> <span class="hljs-string">create_a_new_task</span>
<span class="hljs-attr">        scene:</span> <span class="hljs-string">opening_scene</span>
<span class="hljs-attr">    request_project_name:</span>
<span class="hljs-attr">      intents:</span>
<span class="hljs-attr">      - b:</span> <span class="hljs-string">request_assignee_name</span>
<span class="hljs-attr">      - u:</span> <span class="hljs-string">assignee_name</span>
<span class="hljs-attr">        no_match:</span> <span class="hljs-string">clarify_assignee_name_request</span>
<span class="hljs-attr">        attempts:</span> <span class="hljs-number">2</span>      
<span class="hljs-attr">      - b:</span> <span class="hljs-string">confirm_assignee_name</span>
<span class="hljs-attr">      - u_virtual:</span> <span class="hljs-string">create_a_new_task</span>
<span class="hljs-attr">        scene:</span> <span class="hljs-string">opening_scene</span>      
</code></pre>
<p>The key is in the opening utterance from the user. We are expecting an utterance that matches the intent <code>create_a_new_task</code> with 3 potential attributes contained within the utterance. In general, utterances can always contain useful attributes that we can extract and in conversation design we can choose to explicitly deal with the presence or absence of an attribute or not.</p>
<p>In this case we are explicitly dealing with the situation where the attribute has not been detected in the utterance. If an attribute is missing we move to a scene whose goal is to collect the required utterance. These scenes complete with a special type of transition <code>u_virtual</code> - this will transition the conversation to the opening_scene and force the conversation engine to reconsider the situation <em>as if</em> the <code>create_a_new_task</code> intent was said.</p>
<p>With each pass through the opening scene we should have additional information until we have all the required attributes and can perform the action of creating the task.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/OpenDialogDocs/docs/conversation-markup.html"><span class="arrow-prev">← </span><span>Conversation Markup Basics</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#conversation-markup-basics">Conversation Markup Basics</a><ul class="toc-headings"><li><a href="#conversation-id">Conversation ID</a></li><li><a href="#conditions">Conditions</a></li><li><a href="#scenes">Scenes</a></li><li><a href="#multiple-scenes">Multiple scenes</a></li><li><a href="#conditional-branching-based-on-missing-information">Conditional branching based on missing information</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/OpenDialogDocs/" class="nav-home"></a><div><h5>Docs</h5><a href="/OpenDialogDocs/docs/conversational-applications">Core Ideas</a></div><div><h5>Community</h5><a href="https://twitter.com/opendialogAI" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/OpenDialogDocs/blog">Blog</a><a href="https://github.com/greenshootlabs">Coming soon on GitHub</a></div></section><section class="copyright">OpenDialog is created by <a href="https://greenshootlabs.com">GreenShoot Labs</a></section><section class="copyright">Copyright © 2019 GreenShoot Labs</section></footer></div></body></html>